#include "Renderer.h"
#include "NodeID.h"
#include "Frame.h"
#include "LogHelper.h"

#include "sd_render/Render.h"

void Renderer::setOutputMode(OutputMode mode)
{
    r_outputMode = mode;
}

//void Master::setVideoFile(cv::String file)
//{
//    m_videoFile = file;
//}

void Renderer::run()
{
    //m_counter = 0;
    //extractFrames();
}

void Renderer::renderFrameResult(FrameResult fr){
    // TODO render frame based on output mode
    // TODO make window a class member
}

/*void Master::extractFrames()
{
    // Open video source
    cv::VideoCapture cap; 
    bool ok = false;
    switch (m_inputType)
    {
        case InputType::File:
            ok = cap.open(m_videoFile);
            break;
        case InputType::Stream:
            ok = cap.open(0);
            break;
    }
    
    // Handle errors if any
    if (!ok)
    {
        LOG_ERROR("sd_node.Master" "Could not open video input");
        return;
    }

    Frame frameStruct;
    for (;;)
    {
        // Extract the next frame from the video source
        cap >> frameStruct.cvFrame;

        // Assign an index to the frame
        frameStruct.index = m_counter;

        //frameStruct.send((m_counter % 2 == 0) ? PREPROCESSOR_A : PREPROCESSOR_B);
        frameStruct.send(PREPROCESSOR_A);

        // Increment counter
        ++m_counter;
    }
}*/


